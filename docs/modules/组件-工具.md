## x-cli

根据api模型， 生成 oc， java， js 三端统一接口。 保障了参数与返回值的一值性。

### 类型

#### 支持原生类型

| ts        | oc                | java      |
| --------- | ----------------- | --------- |
| boolean   | BOOL              | Boolean   |
| int       | NSInteger         | Integer   |
| double    | double            | Double    |
| string    | NSString          | String    |
| Array<?>  | NSArray<?>        | List<?>   |
| Map<?,?\> | NSDitionary<?,?\> | Map<?,?\> |
| Set<?>    | NSSet<?,?\>       | Set<?,?\> |

#### 支持嵌套

```
Map<string,Map<string,Map<string,Map<string,string>>>>;
```



#### 支持可选参数

```
title?:string
```



#### 支持自定义类型

```
interface InnerTitle{
  maintitle: string;
  subtitle: string;
  little: Array<Little>;
}
```



### 示例

``` ts
interface SheetDTO {
    title: string;
    itemList?: Array<Map<string,string>>;
    content?: string;
}
```



将会生成

``` objective-c
...
@interface SheetDTO: JSONModel
@property(nonatomic,copy) NSString* title;
@property(nonatomic,strong) NSArray<NSDictionary<NSString*,NSString*>*><Optional> * itemList;
@property(nonatomic,copy) NSString<Optional> * content;
@property(nonatomic,strong) CameraDTO*<Optional>  camera;
@end


@interface CameraDTO: JSONModel
@property(nonatomic,assign) bool<Optional>  allowsEditing;
@property(nonatomic,assign) bool<Optional>  savePhotosAlbum;
@property(nonatomic,assign) double<Optional>  cameraFlashMode;
@property(nonatomic,copy) NSString<Optional> * cameraDevice;
@end
... 
```



### 特殊参数

带`__xxxx__` 前后双下划线的都为系统保留参数.



```
__event__:string 
```

 oc/java 主动调用 js 的桥梁 



### 函数声明

可以指定默认参数.返回值. 将生成 native 对应类型与接口.

``` typescript
function showActionSheet(sheetDTO:SheetDTO={title:"title",itemList:["a","b","c"],content:"content"}):string {}
```



### 测试方法

测试方法直接写在函数体内即可

``` typescript
	
function showActionSheet(sheetDTO:SheetDTO={title:"title",itemList:["a","b","c"],content:"content"}){
    window.showActionSheet=()=>{
      xxxx.showActionSheet(
      )
      .then(res=>{
        document.getElementById("debug_text").innerText= res;
      })
    }

    window.showActionSheet()
}
```



### 参数可能情况



|                 | 有返回值（primitive） | 有返回值（对象） | 无返回值 |
| --------------- | --------------------- | ---------------- | -------- |
| 有参(primitive) | 支持                  | 支持             | -        |
| 有参(对象)      | 支持                  | 支持             | -        |
| 无参            | -                     | -                | -        |

