# 组件集成 
# iOS 平台模块接入指引

### 1. 导入工程

通过pod导入

```objc
pod 'XEngineSDK'
pod 'UIModule'
```

### 2. 配置工程

###### 拖入配置文件 xengine_config.json [配置文件](./docs/configfile/config.md)

![config-xengine](../../../../config-xengine.png)

json格式  

```json
{
  "appId": "com.zkty.xiaoqu",    // 建议直接设置为应用的 Bundle Identifier
  "appSecret": "8b387ca3ebdd412e9c97ef81ed352ee7",  //随机 md5 值.
  "offlineServerUrl": "https://3rd-public-file.oss-cn-beijing.aliyuncs.com"  //服务器地址,
  "moduels":[
  	{
  		"module_id":"com.zkty.ui",
  		"name":"ui",
  		"tag": "1.0.0",
 			"engine_version": "0.0.1",
  		"minimal_os_version":
  			{
					"ios": "11.1.0",
  				"android_api": 20
				} 
  
		}
  ]
}
```

### 3 使用模块

###### 按照jsPAI表进行方法调用。

### 4 自定义使用模块

###### 1.创建类 继承 xengine__module_BaseModule。
名称以`__xengine__module_` 开头， 如 `__xengine__module_bluetooth`,  以供 iOS 自动注册用。

###### 2. 重写父类 方法

```objective-c
- (NSString *)moduleId
{
    return @"模块id";
}
```




###### 3.在回调方法中接收 数据 并处理

​	异步方法

```objc
- (void)funcName:(NSString *)jsonString complate:(XEngineCallBack)completionHandler
{
  // funcName 函数名称（方法名）
  // jsonString js传过来的数据。是个 json串 需要解析使用
  // 可以使用sdk 提供的解析方法 也可以自己解析
  NSDictionary *param = [JSONToDictionary toDictionary:jsonString];
    if (param)
    {
    }
  
  
  // completionHandler 回调block
   //如果js需要 参数回调需要调用这个block 把数据回调给js
  // typedef void (^XEngineCallBack)(NSString * _Nullable result,BOOL complete);
  	NSString *jsonStr = [JSONToDictionary toString:result];
		completionHandler(jsonStr, YES);
}
```






funcName 请参考模块 API表 [模块API表](https://github.com/lgy881228/docs/blob/master/document_js/UI模块使用文档.md)

​	同步方法

```objective-c
- (id) funcName:(NSString *) jsonString
{
  // funcName 函数名称（方法名）
  // jsonString js传过来的数据。是个 json串 需要解析使用
  // 可以使用sdk 提供的解析方法 也可以自己解析 方法见 “异步方法”
    return jsonString;
}
```

```